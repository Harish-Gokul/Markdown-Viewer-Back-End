# Flight Booking System

### To start The server 
```bash
npm i 
npm index.js
```
I have not included node_module folder, so npm i can install all the dependencies that i have used in my project 
`npm index.js` will start the server in port 3000

Software Required
   - Node js 
   - Mongodb (No Sql Database)
   - postman (To Test our Api)

## Api routes

### Admin
- Create a admin 
    - `POST` [http://localhost:3000/admins](http://localhost:3000/admins)
        
        ```json
        // Req Body
        {
            "name":"Vyshali S",
            "email":"vyshali@gmail.com",
            "password":"vyshali",
            "phone": "9876543210"
        }
        // Res Body
        {
            "admin": {
                "name": "Vyshali S",
                "email": "vyshali@gmail.com",
                "_id": "6445bc6bdde421220dd637f2",
                "phone": 9876543210
            },
            "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDQ1YmM2YmRkZTQyMTIyMGRkNjM3ZjIiLCJpYXQiOjE2ODIyOTE4MTl9.3Ba-f8IRtt0dHhTRE4UafROoq2g0_hXV6ai7zNKN9aY"
        }
        ```
- authentication of Admin
    - `POST` [http://localhost:3000/authAdmin](http://localhost:3000/authAdmin)
    ```json
        // Request body
        {
            "email":"vyshali@gmail.com",
            "password":"vyshali"
        }
        // Response
        {
    "admin": {
        "name": "Vyshali S",
        "email": "vyshali@gmail.com",
        "_id": "6445bc6bdde421220dd637f2",
        "phone": 9876543210
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDQ1YmM2YmRkZTQyMTIyMGRkNjM3ZjIiLCJpYXQiOjE2ODIyOTIxODR9.-9Gxnz80PnwEGxb65ReJNzzEwx1vpoR0z3ICKGr42bI"
    }
    ```
In the Above code i have returned a JWT (javascript web token), This token has to be sent in the request header `x-auth-admin-token:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDQ1YmM2YmRkZTQyMTIyMGRkNjM3ZjIiLCJpYXQiOjE2ODIyOTIxODR9.-9Gxnz80PnwEGxb65ReJNzzEwx1vpoR0z3ICKGr42bI`

To access specific Routes



### Flights
- To GET All Flights (**No Auth Required**)
    - `GET` [http://localhost:3000/flights/allFlights](http://localhost:3000/flights/allFlights)
- To GET One specific Flight (**No Auth Required**)
    - `GET` [http://localhost:3000/flights/:ID](http://localhost:3000/flights/:ID)
- To filter flights based on from, to , departureDateAndTime (**No Auth Required**)
    - `GET` [http://localhost:3000/flights/?from=Coimbatore&to=Chennai&departureDateAndTime=2023-04-21](http://localhost:3000/flights/?from=Coimbatore&to=Chennai&departureDateAndTime=2023-04-21)
- To Create A Flight (**Admin Auth Required we have provide token in Header with `x-auth-admin-token` key**)
    - `POST` [http://localhost:3000/flights](http://localhost:3000/flights)
        ```json
        // request Header - x-auth-admin-token : token
        // request body
        {
            "from": "Bengaluru",
            "to": "Chennai",
            "departureDateAndTime": "2023-04-21T23:50:00.000Z",
            "name": "Indigo",
            "number": 9876,
            "pricePerSeat":966,
            "seats":[{"seatId":"a0","isAvailable":true}.....{"seatId":"f10","isAvailable":true}] //Seats can be generated by using [https://github.com/Vyshali-S/flight-booking-system-backEnd/blob/main/generateSeat.js](https://github.com/Vyshali-S/flight-booking-system-backEnd/blob/main/generateSeat.js)
        }
        ```
- To Edit a Flight (** Admin Auth Required**)
    - `PUT` [http://localhost:3000/flights/:ID](http://localhost:3000/flights/:ID) Same req body with changed values is required 
- To Delete a Flight (** Admin Auth Required**)
     - `DELETE` [http://localhost:3000/flights/:ID](http://localhost:3000/flights/:ID)
